?blogdown::new_site
blogdown::new_site()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
bookdown:::mathquill()
?optim
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
knitr::opts_chunk$set(echo = TRUE)
library(haven)
data_url <- "https://wps.pearsoned.com/wps/media/objects/11422/11696965/datasets3e/datasets/ch5_cps_box.dta"
earnings <- read_dta(data_url)
head(earnings)
?coeftest
??coeftest
?lmtest::coeftest
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
library(tidyverse)
library(rcovidUK)
#Set the most recent week of data for 2020
week_2020 <- ONSweekly %>%
filter(year == 2020, reg_nm == "North East", !is.na(deaths)) %>%
pull(week) %>%
max
max
week_2020
blogdown:::new_post_addin()
blogdown:::serve_site()
source('~/excessdeaths/deaths_by_region.R', echo=TRUE)
blogdown:::serve_site()
library(tidyverse)
library(rcovidUK)
#Set the most recent week of data for 2020
week_2020 <- ONSweekly %>%
filter(year == 2020, !is.na(deaths)) %>%
pull(week) %>%
max
df_2020 <- ONSweekly %>%
filter(year == 2020)
df_prev5 <- ONSweekly %>%
filter(year < 2020 & year >= 2015)
df_prev5 %>%
group_by(reg_nm, week) %>%
summarise(deaths_mean = mean(deaths),
deaths_sd = sd(deaths),
n = n(),
se = deaths_sd/sqrt(n)) %>%
mutate(year = "2015-2019") %>%
rename(deaths = deaths_mean) %>%
bind_rows(df_2020) %>%
filter(week<week_2020) %>%
ggplot(aes(x=week, y = deaths, col = year,
group = reg_id)) +
geom_errorbar(aes(ymin=deaths - 2 * se,
ymax = deaths + 2 * se),
width=.2, colour="black") +
geom_line(size = 1) +
facet_wrap(~reg_nm, ncol = 2) +
scale_color_brewer(palette = "Set1",
labels = c("Avg Past 5 Yrs", "2020")) +
labs(x= "Week from Start of Year",
y = "Deaths per Week") +
theme_bw()+
theme(legend.position = 'top',
legend.title = element_blank(),
legend.key.size = unit(1, "cm"))
